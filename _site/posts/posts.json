[
  {
    "path": "posts/welcome/",
    "title": "Welcome to Measurement & Multilevel Modeling Lab",
    "description": "Welcome to our blog. We hope you enjoy \nreading what we have to say!",
    "author": [
      {
        "name": "MMM Lab",
        "url": {}
      }
    ],
    "date": "2020-12-17",
    "categories": [],
    "contents": "\n\n\n\n",
    "preview": {},
    "last_modified": "2020-12-17T22:21:35-08:00",
    "input_file": {}
  },
  {
    "path": "posts/2020-07-25-part-1-covid-19/",
    "title": "Exploring the UAS Survey Part 1: Data exploration (Demography and Risk Items)",
    "description": "Analyze Covid-19 survey conducted by USC in March, 2020.",
    "author": [
      {
        "name": "Haley",
        "url": {}
      }
    ],
    "date": "2020-07-25",
    "categories": [
      "COVID",
      "Visualization",
      "Exploratory Data Analysis",
      "Applied"
    ],
    "contents": "\n\nContents\nIntroduction\nData preparation\nLoading libraries\nLoading data using here package\nData transformation\n\nGender\nAge\nResidence\nEducation\nIncome\nRace\nTime\nSummary\nPublication Statement\n\n[Edit by ML: The styler package was used to style the code. ]\nIntroduction\nAs people in the US learned about the COVID-19 pandemic, their perceived risks related to infection, unemployment, and other risk factors have changed during the early month of the outbreak. In this post, we are interpreting a survey published by the University of Southern California by analyzing and comparing some key features related to risk factors.\nData preparation\nLoading libraries\n\n\nlibrary(tidyverse)\nlibrary(Rmisc)\nlibrary(ggpubr)\nlibrary(ggsci)\n\n\n\nLoading data using here package\n\n\n# Imported the second wave of UAS230 Covid Survey Data.\ncovid19 <- readr::read_csv(here::here(\"data\", \"uas230_march_31_2020.csv\"))\n# The data was collected from a national survey during 10 March,2020 - 31 March,2020.\n\n\n\nData transformation\n\n\n# Create a new dataframe contains only key demographic information and risk items\ndemo <- covid19 %>%\n  select(\n    statereside, gender, end_date, age, education, hhincome, race,\n    cr005, cr009, cr006, cr008a, end_date\n  )\n\ndemo <- na_if(demo, \".a\") # question never seen by the respondents. \n                          # S/he may skip over the question, or never \n                          # view the question due to survey broke off.\ndemo <- na_if(demo, \".e\") # .e -> questions that were asked but not answered\ndemo <- na_if(demo, \".c\") # .c -> if respondent did not complete the survey\n\ndemo <- mutate_at(\n  demo, # convert data type to numeric data\n  vars(cr006, cr005, cr009, cr008a, age),\n  as.numeric\n)\ndemo <- na.omit(demo)\n\n\n\nGender\n58.6% of the respondents are female.\nMale and Female have a similar belief in how infectious Coronavirus is.\nMore male respondents are very optimistic about the risks related to Coronavirus.\n\n\ngen <- demo %>%\n  group_by(gender) %>%\n  dplyr::summarise(g = n())\n\nggplot(gen, aes(x = gender, y = g, fill = gender)) + # Barplot of gender distribution with annotation\n  geom_col() +\n  geom_label(aes(label = g)) +\n  labs(x = \"Gender\", y = \"Count\") +\n  scale_fill_jco() + # jco palette\n  coord_flip() +\n  theme_bw() +\n  theme(legend.position = \"none\")\n\n\n\ngender_inf <- demo %>% # Plot perceived infection risk\n  select(gender, cr005) %>%\n  ggplot(aes(x = cr005, color = gender, fill = gender)) +\n  geom_density(alpha = 0.5) +\n  theme_bw() +\n  theme(legend.title = element_blank(), legend.text = element_text(size = 10)) +\n  labs(x = \"Perceived risk of infection\")\n\n\ngender_death <- demo %>% # Plot perceived risk of death\n  select(gender, cr006) %>%\n  ggplot(aes(x = cr006, color = gender, fill = gender)) +\n  geom_density(alpha = 0.5) +\n  theme_bw() +\n  theme(legend.title = element_blank(), legend.text = element_text(size = 10)) +\n  labs(x = \"Perceived risk of death\", y = \"\")\n\n\ngender_unemploy <- demo %>% # Plot perceived unemployment risk\n  select(gender, cr008a) %>%\n  ggplot(aes(x = cr008a, color = gender, fill = gender)) +\n  geom_density(alpha = 0.5) +\n  theme_bw() +\n  theme(legend.title = element_blank(), legend.text = element_text(size = 10)) +\n  labs(x = \"Perceived unemployment risk\", y = \"\")\n\n\ngender_finance <- demo %>% # Plott perceived risk of running out of money\n  select(gender, cr009) %>%\n  ggplot(aes(x = cr009, color = gender, fill = gender)) +\n  geom_density(alpha = 0.5) +\n  theme_bw() +\n  theme(legend.title = element_blank(), legend.text = element_text(size = 10)) +\n  labs(x = \"Perceived risk of running out of money\")\n\n\nggarrange(gender_inf, gender_death, gender_finance, gender_unemploy + rremove(\"x.text\"), # Combining gender and risk items in one plot\n  common.legend = TRUE, legend = \"right\",\n  ncol = 2, nrow = 2\n)\n\n\n\n\nAge\nMost respondents are between age 30 to age 60.\nYounger respondents have a higher estimate chance of infection, but a lower estimate chance of death related to Coronavirus.\nElderly respondents have a lower perceived unemployment risk and financial risk related to coronavirus.\n[Two graphs below are edited by ML]\n\n\nggplot(demo, aes(x = age)) +\n  geom_histogram(binwidth = 10, alpha = 0.85, fill = \"deepskyblue3\", color = \"white\") +\n  theme_minimal() +\n  labs(x = \"Age\", y = \"Count\") +\n  scale_x_continuous(breaks = seq(0, 100, by = 10)) +\n  scale_y_continuous(breaks = seq(0, 1400, by = 200))\n\n\n\nggplot(data = demo) + # combined plot 1\n  geom_point(\n    mapping = aes(x = age, y = cr005, color = \"Perceived Risk of Infection\"),\n    alpha = 0.1, size = 0.5\n  ) +\n  geom_point(\n    mapping = aes(x = age, y = cr006, color = \"Perceived Risk of Death\"),\n    alpha = 0.1, size = 0.5\n  ) +\n  geom_smooth(mapping = aes(x = age, y = cr005, color = \"Perceived Risk of Infection\")) +\n  geom_smooth(mapping = aes(x = age, y = cr006, color = \"Perceived Risk of Death\")) +\n  labs(y = \"Perceived Risk (%)\", x = \"Age\") +\n  theme_bw() +\n  theme(legend.title = element_blank(), legend.text = element_text(size = 10)) +\n  scale_x_continuous(breaks = seq(0, 100, by = 10))\n\n\n\nggplot(data = demo) + # combined plot 2\n  geom_point(\n    mapping = aes(x = age, y = cr008a, color = \"Perceived Unemployment Risk\"),\n    alpha = 0.1, size = 0.5\n  ) +\n  geom_point(\n    mapping = aes(x = age, y = cr009, color = \"Perceived Financial Risk\"),\n    alpha = 0.1, size = 0.5\n  ) +\n  geom_smooth(mapping = aes(x = age, y = cr008a, color = \"Perceived Unemployment Risk\")) +\n  geom_smooth(mapping = aes(x = age, y = cr009, color = \"Perceived Financial Risk\")) +\n  labs(y = \"Perceived Risk (%)\", x = \"Age\") +\n  theme_bw() +\n  theme(legend.title = element_blank(), legend.text = element_text(size = 10)) +\n  scale_x_continuous(breaks = seq(15, 95, by = 10))\n\n\n\n\nResidence\nThe number of respondents from California is significantly higher than number of respondents from any other states.\nRespondents in New York, Pennsylvania, and Michigan report a lower perceived fianancial risk related to Coronavirus.\nWhile respondents in California, Illnois, and Texas report a higher perceived unemployment risk and financial risk related to Coronavirus.\n[ML: Interestingly, it looks like Californian perceived higher risks consistently than those in other states.]\n\n\ndemo_state <- demo %>% # add counts for each state:\n  add_count(statereside, name = \"n\") %>% # use New York as cutline, filter out 8 states with n >= 115\n  filter(n >= 115)\n\n\nreside <- demo_state %>%\n  group_by(statereside) %>%\n  dplyr::summarise(re = n())\n\nggplot(reside, aes(x = statereside, y = re, fill = statereside)) + # Barplot of gender distribution with annotation\n  geom_col() +\n  geom_label(aes(label = re), fill = \"white\") +\n  labs(x = \"State Reside\", y = \"Count\") +\n  scale_fill_jco() +\n  coord_flip() +\n  theme_bw() +\n  theme(legend.position = \"none\")\n\n\n\ndeath_state <- ggplot(demo_state, aes(x = cr006, fill = statereside)) + # Plot perceived risk of death\n  geom_density(alpha = 0.3) +\n  theme_minimal() +\n  labs(y = \"\", x = \"Perceived risk of death\") +\n  theme_bw() +\n  theme(legend.title = element_blank(), legend.text = element_text(size = 10))\n\ninf_state <- ggplot(demo_state, aes(x = cr005, fill = statereside)) + # Plot perceived risk of infection\n  geom_density(alpha = 0.3) +\n  theme_minimal() +\n  labs(x = \"Perceived risk of infection\") +\n  theme_bw() +\n  theme(legend.title = element_blank(), legend.text = element_text(size = 10))\n\nfinance_state <- ggplot(demo_state, aes(x = cr009, fill = statereside)) + # Plot perceived financial risk\n  geom_density(alpha = 0.3) +\n  theme_minimal() +\n  labs(y = \"\", x = \"Perceived financial risk\") +\n  theme_bw() +\n  theme(legend.title = element_blank(), legend.text = element_text(size = 10))\n\n\nunemploy_state <- ggplot(demo_state, aes(x = cr008a, fill = statereside)) + # Plot perceived unemployment risk\n  geom_density(alpha = 0.3) +\n  theme_minimal() +\n  labs(x = \"Perceived unemployment risk\") +\n  theme_bw() +\n  theme(legend.title = element_blank(), legend.text = element_text(size = 10))\n\n\nggarrange(inf_state, death_state, finance_state, unemploy_state, # combine the plots\n  common.legend = TRUE, legend = \"right\",\n  ncol = 2, nrow = 2\n)\n\n\n\nfinance_state_stat <- desc_statby(demo_state, measure.var = \"cr009\", grps = \"statereside\") # Summary table for perceived risk of financial hardship by states\nfinance_state_stat <- finance_state_stat[, c(\"statereside\", \"length\", \"mean\", \"sd\")] %>%\n  arrange(-mean) # sort by mean in decending order\n\nfinance_state_stat$mean <- round(finance_state_stat$mean, 2) # round to 2 decimal places\nfinance_state_stat$sd <- round(finance_state_stat$sd, 2)\n\n\nfinance_state_stat <- ggtexttable(finance_state_stat,\n  rows = NULL,\n  theme = ttheme(\"mOrange\")\n) # Summary table plot, medium orange theme\n\n\nunemploy_state_stat <- desc_statby(demo_state, measure.var = \"cr008a\", grps = \"statereside\") # Summary table for perceived risk of unemployment by states\nunemploy_state_stat <- unemploy_state_stat[, c(\"statereside\", \"length\", \"mean\", \"sd\")] %>%\n  arrange(-mean)\n\nunemploy_state_stat$mean <- round(unemploy_state_stat$mean, 2) # round to 2 decimal places\nunemploy_state_stat$sd <- round(unemploy_state_stat$sd, 2)\n\nunemploy_state_stat <- ggtexttable(unemploy_state_stat,\n  rows = NULL,\n  theme = ttheme(\"mOrange\")\n)\n\ntext_2 <- paste(\"Perceived risk of unemployment\", sep = \" \") # Create text to annotate summary tables\ntext_1 <- paste(\"Perceived risk of financial hardship\", sep = \" \")\ntext.p1 <- ggparagraph(text = text_1, face = \"italic\", size = 11, color = \"black\")\ntext.p2 <- ggparagraph(text = text_2, face = \"italic\", size = 11, color = \"black\")\n\nggarrange(text.p1, text.p2, finance_state_stat, unemploy_state_stat, # combine the plots\n  heights = c(0.1, 2),\n  ncol = 2, nrow = 2\n)\n\n\n\n\nEducation\nRespondents with a higher education degree report a higher perceived risk of infection, but lower perceived risk of death.\nRespondents with a lower educaton degree report a higher perceived unemployment risk and financial risk.\n\n\ndemo <- demo %>% # recode education level into more organzied groups\n  mutate(tidyEdu = recode(education,\n    `1 Less than 1st grade` = \"Less than HS\",\n    `10 Some college-no degree` = \"Some College\",\n    `11 Assoc. college degree-occ/voc prog` = \"Associate\",\n    `12 Assoc. college degree-academic prog` = \"Associate\",\n    `13 Bachelor's degree` = \"College/professional\",\n    `14 Master's degree` = \"Master/PhD\",\n    `15 Professional school degree` = \"College/professional\",\n    `16 Doctorate degree` = \"Master/PhD\",\n    `2 Up to 4th grade` = \"Less than HS\",\n    `3 5th or 6th grade` = \"Less than HS\",\n    `4 7th or 8th grade` = \"Less than HS\",\n    `5 9th grade` = \"Less than HS\",\n    `6 10th grade` = \"Less than HS\",\n    `7 11th grade` = \"Less than HS\",\n    `8 12th grade-no diploma` = \"Less than HS\",\n    `9 High school graduate or GED` = \"HS\"\n  ))\n\n\nedu <- demo %>%\n  group_by(tidyEdu) %>%\n  dplyr::summarise(e = n())\n\nggplot(edu, aes(x = tidyEdu, y = e, fill = tidyEdu)) + # Barplot of education distribution with annotation\n  geom_col() +\n  geom_label(aes(label = e), fill = \"white\") +\n  labs(x = \"Education\", y = \"Count\") +\n  scale_fill_jco() +\n  coord_flip() +\n  theme_bw() +\n  theme(legend.position = \"none\") +\n  scale_x_discrete(limits = c(\"Less than HS\", \"HS\", \"Some College\", \"Associate\", \"College/professional\", \"Master/PhD\")) # fixed order\n\n\n\n# summarize basic statistic using Rmisc package\nvis_death <- summarySE(demo, measurevar = \"cr006\", groupvars = c(\"tidyEdu\"))\n\nedu_2 <- ggplot(vis_death, aes(x = tidyEdu, y = cr006, fill = tidyEdu)) + # Plot Perceived risk of death\n  geom_bar(stat = \"identity\", width = .5) +\n  scale_fill_jco() +\n  theme_minimal() +\n  coord_flip() +\n  labs(x = \"\", y = \"Perceived risk of death (%)\") +\n  scale_x_discrete(limits = c(\"Less than HS\", \"HS\", \"Some College\", \"Associate\", \"College/professional\", \"Master/PhD\")) +\n  scale_y_continuous(breaks = seq(0, 30, by = 5))\n\n\nvis_inf <- summarySE(demo, measurevar = \"cr005\", groupvars = c(\"tidyEdu\")) # Plot Perceived risk of infection\n\nedu_1 <- ggplot(vis_inf, aes(x = tidyEdu, y = cr005, fill = tidyEdu)) +\n  geom_bar(stat = \"identity\", width = .5) +\n  theme_minimal() +\n  scale_fill_jco() +\n  coord_flip() +\n  labs(x = \"\", y = \"Perceived risk of infection (%)\") +\n  scale_x_discrete(limits = c(\"Less than HS\", \"HS\", \"Some College\", \"Associate\", \"College/professional\", \"Master/PhD\")) +\n  scale_y_continuous(breaks = seq(0, 30, by = 5))\n\n# Perceived unemployment risk (cr008a) by education\nvis_umemploy <- summarySE(demo, measurevar = \"cr008a\", groupvars = c(\"tidyEdu\"))\n\nedu_4 <- ggplot(vis_umemploy, aes(x = tidyEdu, y = cr008a, fill = tidyEdu)) + # Plot Perceived risk of unemployment\n  geom_bar(stat = \"identity\", width = .5) +\n  coord_flip() +\n  scale_fill_jco() +\n  theme_minimal() +\n  labs(x = \"\", y = \"Perceived risk of unemployment (%)\") +\n  scale_x_discrete(limits = c(\"Less than HS\", \"HS\", \"Some College\", \"Associate\", \"College/professional\", \"Master/PhD\")) +\n  scale_y_continuous(breaks = seq(0, 30, by = 5))\n\n# Perceived financial risk (cr009) by education\nvis_financial <- summarySE(demo, measurevar = \"cr009\", groupvars = c(\"tidyEdu\"))\n\nedu_3 <- ggplot(vis_financial, aes(x = tidyEdu, y = cr009, fill = tidyEdu)) + # Plot Perceived risk of running out of money\n  geom_bar(stat = \"identity\", width = .5) +\n  coord_flip() +\n  scale_fill_jco() +\n  theme_minimal() +\n  labs(x = \"\", y = \"Perceived risk of running out of money (%)\") +\n  scale_x_discrete(limits = c(\"Less than HS\", \"HS\", \"Some College\", \"Associate\", \"College/professional\", \"Master/PhD\")) +\n  scale_y_continuous(breaks = seq(0, 30, by = 5))\n\nggarrange(edu_1, edu_2, edu_3, edu_4, # Combine plots\n  common.legend = TRUE, legend = \"none\",\n  ncol = 2, nrow = 2\n)\n\n\n\n\nIncome\nHigh income respondents report a higher perceived risk of infection, but a lower perceived risk of death.\nLow income respondents report a higher perceived unemployment risk and financial risk.\n\n\ndemo <- demo %>%\n  mutate(incomeTidy = recode(hhincome,\n    `1 Less than $5,000` = \"under 20k\",\n    `3 7,500 to 9,999` = \"under 20k\",\n    `2 5,000 to 7,499` = \"under 20k\",\n    `4 10,000 to 12,499` = \"under 20k\",\n    `5 12,500 to 14,999` = \"under 20k\",\n    `6 15,000 to 19,999` = \"under 20k\",\n    `7 20,000 to 24,999` = \"20-39k\",\n    `8 25,000 to 29,999` = \"20-39k\",\n    `9 30,000 to 34,999` = \"20-39k\",\n    `10 35,000 to 39,999` = \"20-39k\",\n    `11 40,000 to 49,999` = \"40-59k\",\n    `12 50,000 to 59,999` = \"40-59k\",\n    `13 60,000 to 74,999` = \"60-74k\",\n    `14 75,000 to 99,999` = \"75-99k\",\n    `15 100,000 to 149,999` = \"100-149k\",\n    `16 150,000 or more` = \"150k plus\"\n  ))\n\ntemp_inc <- demo %>%\n  select(incomeTidy) %>%\n  group_by(incomeTidy) %>%\n  dplyr::summarise(cnt = n())\n\nggplot(temp_inc, aes(x = incomeTidy, y = cnt, fill = incomeTidy)) +\n  geom_col() +\n  geom_label(aes(label = cnt), fill = \"white\") +\n  labs(x = \"Income\", y = \"Count\") +\n  scale_fill_jco() +\n  theme_bw() +\n  coord_flip() +\n  theme(legend.position = \"none\") +\n  scale_x_discrete(limits = c(\"under 20k\", \"20-39k\", \"40-59k\", \"60-74k\", \"75-99k\", \"100-149k\", \"150k plus\"))\n\n\n\n# Perceived risk of infection (cr005) by Income\ninc_infection <- summarySE(demo, measurevar = \"cr005\", groupvars = c(\"incomeTidy\"))\n\ninc_1 <- ggplot(inc_infection, aes(x = incomeTidy, y = cr005, fill = incomeTidy)) +\n  geom_bar(stat = \"identity\", width = .5) +\n  theme_minimal() +\n  scale_fill_jco() +\n  coord_flip() +\n  labs(x = \"\", y = \"Perceived risk of infection (%)\") +\n  scale_x_discrete(limits = c(\"under 20k\", \"20-39k\", \"40-59k\", \"60-74k\", \"75-99k\", \"100-149k\", \"150k plus\"))\n\n# Perceived risk of death (cr006) by Education\ninc_death <- summarySE(demo, measurevar = \"cr006\", groupvars = c(\"incomeTidy\"))\n\ninc_2 <- ggplot(inc_death, aes(x = incomeTidy, y = cr006, fill = incomeTidy)) +\n  geom_bar(stat = \"identity\", width = .5) +\n  theme_minimal() +\n  coord_flip() +\n  scale_fill_jco() +\n  labs(x = \"\", y = \"Perceived risk of death (%)\") +\n  scale_x_discrete(limits = c(\"under 20k\", \"20-39k\", \"40-59k\", \"60-74k\", \"75-99k\", \"100-149k\", \"150k plus\"))\n\n# Perceived unemployment risk (cr008a) by Income\ninc_unemploy <- summarySE(demo, measurevar = \"cr008a\", groupvars = c(\"incomeTidy\"))\n\ninc_4 <- ggplot(inc_unemploy, aes(x = incomeTidy, y = cr008a, fill = incomeTidy)) +\n  geom_bar(stat = \"identity\", width = .5) +\n  theme_minimal() +\n  coord_flip() +\n  scale_fill_jco() +\n  labs(x = \"\", y = \"Perceived risk of unemployment (%)\") +\n  scale_x_discrete(limits = c(\"under 20k\", \"20-39k\", \"40-59k\", \"60-74k\", \"75-99k\", \"100-149k\", \"150k plus\"))\n\n# Perceived financial risk (cr009) by Income\ninc_unemploy <- summarySE(demo, measurevar = \"cr009\", groupvars = c(\"incomeTidy\"))\n\n# Create visualization, order the bar by education level\ninc_3 <- ggplot(inc_unemploy, aes(x = incomeTidy, y = cr009, fill = incomeTidy)) +\n  geom_bar(stat = \"identity\", width = .5) +\n  theme_minimal() +\n  coord_flip() +\n  scale_fill_jco() +\n  labs(x = \"\", y = \"Perceived risk of running out of money (%)\") +\n  scale_x_discrete(limits = c(\"under 20k\", \"20-39k\", \"40-59k\", \"60-74k\", \"75-99k\", \"100-149k\", \"150k plus\"))\n\nggarrange(inc_1, inc_2, inc_3, inc_4,\n  common.legend = TRUE, legend = \"none\",\n  ncol = 2, nrow = 2\n)\n\n\n\n\nRace\nCompare to other races, Black American reported a lower perceived risk of infection, but a higher perceived financial risk, and perceived risk of death.\n\n\nrace_total <- demo %>%\n  select(race) %>%\n  group_by(race) %>%\n  filter(race %in% c(\"1 White Only\", \"2 Black Only\", \"4 Asian Only\", \"6 Mixed\")) %>%\n  dplyr::summarise(r = n())\n\n# Plot race distribution with annotation\nggplot(race_total, aes(x = race, y = r, fill = race)) +\n  geom_col() +\n  geom_label(aes(label = r), fill = \"white\") +\n  labs(x = \"Race\", y = \"Count\") +\n  scale_fill_jco() +\n  coord_flip() +\n  theme_bw() +\n  theme(legend.position = \"none\")\n\n\n\n# filter out the racial groups n >200\ndemo_race <- demo %>%\n  select(race, cr005, cr006, cr008a, cr009) %>%\n  filter(race %in% c(\"1 White Only\", \"2 Black Only\", \"4 Asian Only\", \"6 Mixed\"))\n\n# Perceived risk of infection (cr005) by Race\nrace_infection <- summarySE(demo_race, measurevar = \"cr005\", groupvars = c(\"race\"))\n\nrace_1 <- ggplot(race_infection, aes(x = race, y = cr005, fill = race)) +\n  geom_bar(stat = \"identity\", width = .5) +\n  theme_minimal() +\n  coord_flip() +\n  scale_fill_jco() +\n  labs(x = \"\", y = \"Perceived risk of infection (%)\")\n\n# Perceived risk of death (cr006) by Race\nrace_death <- summarySE(demo_race, measurevar = \"cr006\", groupvars = c(\"race\"))\n\nrace_2 <- ggplot(race_death, aes(x = race, y = cr006, fill = race)) +\n  geom_bar(stat = \"identity\", width = .5) +\n  theme_minimal() +\n  coord_flip() +\n  scale_fill_jco() +\n  labs(x = \"\", y = \"Perceived risk of death (%)\")\n\n# Perceived unemployment risk (cr008a) by Race\nrace_unemploy <- summarySE(demo_race, measurevar = \"cr008a\", groupvars = c(\"race\"))\n\nrace_4 <- ggplot(race_unemploy, aes(x = race, y = cr008a, fill = race)) +\n  geom_bar(stat = \"identity\", width = .5) +\n  theme_minimal() +\n  coord_flip() +\n  scale_fill_jco() +\n  labs(x = \"\", y = \"Perceived risk of unemployment (%)\")\n\n# Perceived financial risk (cr009) by Race\nrace_finance <- summarySE(demo_race, measurevar = \"cr009\", groupvars = c(\"race\"))\n\nrace_3 <- ggplot(race_finance, aes(x = race, y = cr009, fill = race)) +\n  geom_bar(stat = \"identity\", width = .5) +\n  theme_minimal() +\n  coord_flip() +\n  scale_fill_jco() +\n  labs(x = \"\", y = \"Perceived risk of running out of money (%)\")\n\nggarrange(race_1, race_2, race_3, race_4,\n  common.legend = TRUE, legend = \"none\",\n  ncol = 2, nrow = 2\n)\n\n\n\n\nTime\nPerceived financial risk and unemployment risk appear to peak at the late March, within the timeframe of this survey.\nAn increasing perceived risk of infection and death related to Coronavirus were noted during March, 2020.\n\n\ndemo$end_date <- as.Date(demo$end_date, format = \"%d%b%Y\") # convert date to the right format\n\ntime_stat <- demo %>% # Calculate daily average value for each risk items to create line chart\n  select(cr005, cr006, cr009, cr008a, end_date) %>%\n  group_by(end_date) %>%\n  dplyr::summarise(n = n(), infection = mean(cr005), death = mean(cr006), unemployment = mean(cr008a), financial = mean(cr009))\n\nt1 <- ggplot(data = time_stat) + # Line chart 1\n  geom_line(aes(end_date, infection, color = \"Perceived risk of infection\")) +\n  geom_line(aes(end_date, death, color = \"Perceived risk of death\")) +\n  theme_bw() +\n  theme(legend.title = element_blank(), legend.text = element_text(size = 10)) + # hide legend text, and adjust legend font size\n  labs(y = \"Perceived Risk (%)\", x = \"Survey Date\")\n\n\nt2 <- ggplot(data = time_stat) +\n  geom_line(aes(end_date, financial, color = \"Perceived financial risk\")) + # Line chart2\n  geom_line(aes(end_date, unemployment, color = \"Perceived unemployment risk\")) +\n  theme_bw() +\n  theme(legend.title = element_blank(), legend.text = element_text(size = 10)) +\n  labs(y = \"Perceived Risk (%)\", x = \"Survey Date\")\n\n\nt3 <- ggplot(demo) +\n  geom_smooth(aes(end_date, cr005, color = \"Perceived financial risk\")) + # geom_smooth plot 1\n  geom_smooth(aes(end_date, cr006, color = \"Perceived risk of death\")) +\n  theme_bw() +\n  labs(y = \"\", x = \"Survey Date\")\n\nt4 <- ggplot(demo) +\n  geom_smooth(aes(end_date, cr008a, color = \"Perceived unemployment risk\")) + # geom_smooth plot 1\n  geom_smooth(aes(end_date, cr009, color = \"Perceived financial risk\")) +\n  theme(legend.title = element_blank(), legend.text = element_text(size = 10)) +\n  theme_bw() +\n  labs(y = \"\", x = \"Survey Date\")\n\n\nt5 <- ggplot(demo, aes(end_date, cr005)) +\n  geom_jitter(size = 1) +\n  theme_bw() +\n  geom_smooth() +\n  labs(x = \"\")\n\nt6 <- ggplot(demo, aes(end_date, cr006)) +\n  geom_jitter(size = 1) +\n  theme_bw() +\n  geom_smooth() +\n  labs(x = \"\")\n\nt7 <- ggplot(demo, aes(end_date, cr008a)) +\n  geom_jitter(size = 1) +\n  theme_bw() +\n  geom_smooth()\n\nt8 <- ggplot(demo, aes(end_date, cr009)) +\n  geom_jitter(size = 1) +\n  theme_bw() +\n  geom_smooth()\n\n\nggarrange(t1, t3,\n  ncol = 2, nrow = 1,\n  common.legend = TRUE, legend = \"top\"\n)\n\n\n\nggarrange(t2, t4,\n  ncol = 2, nrow = 1,\n  common.legend = TRUE, legend = \"top\"\n)\n\n\n\n# ggarrange(t5, t6,t7, t8,\n#           ncol = 2, nrow = 2,\n#           common.legend = TRUE, legend = \"top\")\n\n\n\n[The graph below is added by ML]\n\n\n# Edit by ML: Showing the variability in responses across time\nggplot(\n  demo,\n  aes(end_date, cr008a)\n) +\n  geom_jitter(width = 0.1, height = 0.5, alpha = 0.1, size = 0.5) +\n  stat_summary(fun = mean, geom = \"line\") +\n  theme_bw() +\n  geom_smooth(linetype = \"dotted\") +\n  labs(y = \"Perceived Financial Risk (%)\")\n\n\n\n\nSummary\nThe survey was conducted in the early month of the COVID-19 outbreak in the US. There was a large variation in how people evaluate risks related to Coronavirus, but the findings suggested that people perception of risks experienced a significant increase compare to the beginning of the survey.\nPublication Statement\nThe analysis described in this page relies on data from survey(s) administered by the Understanding America Study, which is maintained by the Center for Economic and Social Research (CESR) at the University of Southern California. The content of this page is solely the responsibility of the authors and does not necessarily represent the official views of USC or UAS. Journalists and other reporters must refer readers to methodology information available at <uasdata.usc.edu> or election.uas.edu as appropriate.\n\n\n\n",
    "preview": "posts/2020-07-25-part-1-covid-19/covid_p1_files/figure-html5/gender-1.png",
    "last_modified": "2020-12-17T21:04:18-08:00",
    "input_file": {}
  }
]
